<html  xmlns="http://www.w3.org/1999/xhtml"  
  xmlns:h="http://java.sun.com/jsf/html"  
  xmlns:ui="http://java.sun.com/jsf/facelets"  
  xmlns:f="http://java.sun.com/jsf/core"  
  xmlns:rich="http://richfaces.org/rich"  
  xmlns:a4j="http://richfaces.org/a4j"  
 >  
  
  <ui:composition template="/templates/template.xhtml">
  
  <ui:define name="metadata">

  </ui:define>

	
	<ui:define name="content">
 
    <a4j:status  
      onstart="#{rich:component('statutPanel')}.show()"  
      onstop="#{rich:component('statutPanel')}.hide()"  
    />  
    <h:form id="coffeesForm">  
      <center>  
        <rich:dataTable  
          id="listCoffeesRDT"  
          value="#{coffeeBean.coffees}"  
          var="coffee"  
          iterationStatusVar="it"  
          rows="3"  
          rendered="true"  
        >  
          <f:facet name="header">  
            <h:outputText value="Coffee Shop" />  
          </f:facet>  
          <rich:column>  
            <f:facet name="header">  
              <h:outputText value="id" />  
            </f:facet>  
            <h:outputText value="#{coffee.id}"  />  
          </rich:column>  
          <rich:column>  
            <f:facet name="header">  
              <h:outputText value="name" />  
            </f:facet>  
            <h:outputText value="#{coffee.name}"  />  
          </rich:column>  
          <rich:column>  
            <f:facet name="header">  
              <h:outputText value="price" />  
            </f:facet>  
            <h:outputText value="#{coffee.price}"  />  
          </rich:column>  
          <rich:column>  
            <f:facet  
              name="header"  
            />  
            <a4j:commandLink  
              execute="@this"  
              render="@none"  
              oncomplete="#{rich:component('deleteCoffeeConfirmationPanel')}.show()"  
            >  
              <h:graphicImage  
                value="/resources/images/delete.png"  
                title="delete"  
                alt="delete"  
              />  
              <a4j:param  
                value="#{it.index}"  
                assignTo="#{coffeeBean.currentCoffeeIndex}"  
              />  
            </a4j:commandLink>  
            <a4j:commandLink  
              render="editGrid"  
              execute="@this"  
              oncomplete="#{rich:component('editCoffeePanel')}.show()"  
            >  
              <h:graphicImage  
                value="/resources/images/edit.png"  
                title="edit"  
                alt="edit"  
              />  
              <a4j:param  
                value="#{it.index}"  
                assignTo="#{coffeeBean.currentCoffeeIndex}"  
              />  
              <f:setPropertyActionListener  
                target="#{coffeeBean.coffee}"  
                value="#{coffee}"  
              />  
            </a4j:commandLink>  
          </rich:column>  
          <f:facet name="footer">  
            <rich:dataScroller  
              id="listCoffeesRDS"  
              page="#{coffeeBean.currentPage}"  
            />  
          </f:facet>  
        </rich:dataTable>  
        <a4j:jsFunction  
          name="deleteCoffee"  
          action="#{coffeeBean.deleteCoffee}"  
          render="listCoffeesRDT"  
          execute="@this"  
          oncomplete="#{rich:component('deleteCoffeeConfirmationPanel')}.hide();"  
        />  
        <rich:popupPanel  
          id="statusPanel"  
          autosized="true"  
          resizeable="false"  
        >  
          <h:graphicImage  
            value="../resources/images/wait.gif"  
            title="wait"  
            alt="wait"  
          />  
          Please wait ...  
        </rich:popupPanel>  
        <rich:popupPanel  
          id="deleteCoffeeConfirmationPanel"  
          autosized="true"  
          resizeable="false"  
        >  
          Do you really want to delete Coffee Entry ?  
          <a4j:commandButton  
            value="cancel"  
            onclick="#{rich:component('deleteCoffeeConfirmationPanel')}.hide(); return false;"  
          />  
          <a4j:commandButton  
            value="delete"  
            onclick="deleteCoffee(); return false;"  
          />  
        </rich:popupPanel>  
        <rich:popupPanel  
          id="editCoffeePanel"  
          domElementAttachment="parent"  
          autosized="true"  
          resizeable="false"  
        >  
          <f:facet name="header">  
              <h:outputText value="Update Coffee" />  
          </f:facet>  
          <h:panelGrid  
            columns="3"  
            id="editGrid"  
          >  
            <h:outputText styleClass="title-text" value="id" />  
            <h:outputText styleClass="data-text" value="#{coffeeBean.coffee.id}"  />  
            <h:panelGroup />  
            <h:outputText styleClass="title-text" value="name" />  
            <h:inputText  
              id="editCoffeeNameIn"  
              value="#{coffeeBean.coffee.name}"  
              maxlength="10"  
              size="10"  
              required="true"  
            />  
            <rich:message for="editCoffeeNameIn" />  
            <h:outputText styleClass="title-text" value="price" />  
            <h:inputText  
              id="editCoffeePriceIn"  
              value="#{coffeeBean.coffee.price}"  
              maxlength="6"  
              size="6"  
              required="true"  
            />  
            <rich:message for="editCoffeePriceIn" />  
          </h:panelGrid>  
          <a4j:commandButton  
            value="update"  
            action="#{coffeeBean.editCoffee}"  
            render="listCoffeesRDT"  
            execute="editCoffeePanel"  
            oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('editCoffeePanel')}.hide();}"  
          />  
          <a4j:commandButton  
            value="cancel"  
            onclick="#{rich:component('editCoffeePanel')}.hide(); return false;"  
          />  
        </rich:popupPanel>  
        <h:commandLink  
          value="Initialize"  
          action="#{coffeeBean.init}"  
        />  
      </center>  
    </h:form>  
    </ui:define>
 </ui:composition>
 </html>